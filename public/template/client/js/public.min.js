$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var sizeArray=["M","L","XL","XXL"];$(document).ready(function(){$("#add-product-detail").on("click","#add-to-cart",function(){let t=$(this).data("id"),a=$(this).data("price"),e=$("#select-size").val();if(!sizeArray.includes(e)){let t=$("#select-size").prop("selectedIndex");e=sizeArray[t]}let n=$("input.quantity").val();$.ajax({type:"POST",dataType:"JSON",data:{id:t,price:a,size:e,quantity:n},url:"/cart/addToCart",success:function(t){$(".icon-header-noti").attr("data-notify",t.totalProductInCart),$(".header-cart-content").html(t.yourCartHtml),swal(t.productName,"Thêm Vào Giỏ Hàng Thành Công !","success")},error:function(t,a,e){alert(e)}})}),$("#cart-index").on("click",".btn-delete-product",function(){let t=$(this).data("id"),a=$(this).data("size");$.ajax({type:"POST",dataType:"JSON",data:{id:t,size:a},url:"/cart/delete",success:function(e){!0===e.message?($("#"+t+"-"+a).fadeOut(800),$("#total-price").text(e.totalPrice+"Đ"),$(".icon-header-noti").attr("data-notify",e.totalProductsInCart),$(".header-cart-content").html(e.yourCartHtml),0===parseInt(e.totalPrice)&&($("#cart-index").html(e.emptyCartHtml),$("html, body").animate({scrollTop:50},1200))):swal("Lỗi","Có vấn đề khi xóa. Xin hãy thử lại !","error").then(t=>{window.location.reload()})},error:function(t,a,e){alert(e)}})}),$("#cart-index .table-shopping-cart").on("click",".btn-num-product-down, .btn-num-product-up",function(){let t=$(this).siblings(".num-product").val(),a=$(this).parents(".column-4").siblings(".column-6").children(".btn-delete-product").data("id"),e=$(this).parents(".column-4").siblings(".column-6").children(".btn-delete-product").data("size");t<1&&($(this).siblings(".num-product").val(1),t=1);var n=$(this);$.ajax({type:"POST",dataType:"JSON",data:{id:a,size:e,quantity:t},url:"/cart/changeProductQuantity",success:function(t){!0===t.message?($("#total-price").text(t.totalPrice+"Đ"),n.parents(".column-4").siblings(".column-5").text(t.intoMoney+"đ"),$(".header-cart-content").html(t.yourCartHtml)):swal("Lỗi","Có vấn đề khi thêm số lượng. Xin hãy thử lại !","error").then(t=>{window.location.reload()})},error:function(t,a,e){alert(e)}})})});